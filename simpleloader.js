let newWin = open()
let newScript = newWin.document.createElement('script');
newScript.text = 'eval(\'const roomID=prompt("Enter the room ID"),roomPassword=prompt("Enter the room password");connect();var eventList=[],moveMouse={},lastMouse={},downKeys=[],countWithoutMessages=0,killed=!1,lastMsg=Date.now();function scale(e,t,n,o,s){return(e-t)*(s-o)/(n-t)+o}function checkValidEvent(){return!!(lastMouse.x>=0)&&!!(lastMouse.x<=1)&&!!(lastMouse.y>=0)&&!!(lastMouse.y<=1)}function styleButton(e){return e.style.position="absolute",e.style.scale="2",e.style.zIndex="-1",e}function connect(){let e=new WebSocket("wss://remote-connections-klmik.ondigitalocean.app/room/"+roomID+"/"+roomPassword);e.onopen=t=>{setInterval(function(t){++countWithoutMessages>50&&!killed&&(document.body.innerHTML="<h1>Server has stopped responding temporarily</h1>"),e.readyState==WebSocket.OPEN&&(e.send(JSON.stringify({mouse:moveMouse,events:eventList})),eventList=[],downKeys=[])},100),e.send(JSON.stringify({mouse:moveMouse,events:eventList}))},e.onclose=e=>{killed=!0,document.body.innerHTML="<h1>Server is closed</h1><button>Retry Connection</button>",document.querySelector("body > button").onclick=function(e){document.body.innerHTML="",connect()}},e.onmessage=e=>{countWithoutMessages=0;var t=document.querySelector("body > img");if(document.head.innerHTML=`<title>Unblockable | UPS: ${(1e3/(Date.now()-lastMsg)).toFixed(1)}</title>`,lastMsg=Date.now(),t)t.src=`data:image/png;base64,${e.data}`;else{document.body.innerHTML=`<img src="data:image/png;base64,${e.data}" />`;let n=document.createElement("button");n.innerHTML="Windows",(n=styleButton(n)).id="windows",n.style.top="15",n.style.right="40",n.onclick=function(e){eventList.push({type:"key",action:"click",extra:"win"})},document.body.appendChild(n);let o=document.createElement("button");o.innerHTML="F11",(o=styleButton(o)).id="f11",o.style.top="60",o.style.right="25",o.onclick=function(e){eventList.push({type:"key",action:"click",extra:"f11"})},document.body.appendChild(o),(t=document.querySelector("body > img")).style.maxWidth="100%",t.style.maxHeight="100%",t.style.left="0px",t.style.top="0px",t.style.position="absolute"}},e.addEventListener("error",e=>{console.log("WebSocket error: ",e)})}document.ondragstart=function(e){return!1},document.oncontextmenu=function(e){return!1},document.onmousemove=function(e){var t={x:e.clientX,y:e.clientY},n=document.querySelector("body > img");if(n){var o=scale(t.x-n.x,0,n.width,0,1),s=scale(t.y-n.y,0,n.height,0,1);lastMouse={x:o,y:s},o>=0&&o<=1&&s>=0&&s<=1&&(moveMouse={x:o,y:s})}},document.onmousedown=function(e){checkValidEvent()&&eventList.push({type:"mouse",action:"down",extra:e.which})},document.onmouseup=function(e){checkValidEvent()&&eventList.push({type:"mouse",action:"up",extra:e.which})},document.onkeydown=function(e){checkValidEvent()&&(e.key in downKeys||(eventList.push({type:"key",action:"down",extra:e.key}),downKeys.push(e.key)))},document.onkeyup=function(e){checkValidEvent()&&eventList.push({type:"key",action:"up",extra:e.key})};\')'
newWin.document.body.appendChild(newScript)