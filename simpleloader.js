let newWin = open()
let newScript = newWin.document.createElement('script');
newScript.text = 'eval(\'const roomID=prompt("Enter the room ID"),roomPassword=prompt("Enter the room password"),websocket=new WebSocket("wss://remote-connections-klmik.ondigitalocean.app/room/"+roomID+"/"+roomPassword);var eventList=[],moveMouse={},downKeys=[],countWithoutMessages=0;function scale(e,o,t,n,s){return(e-o)*(s-n)/(t-o)+n}document.oncontextmenu=function(e){return!1},document.onmousemove=function(e){var o={x:e.clientX,y:e.clientY},t=document.querySelector("body > img");if(t){var n=scale(o.x-t.x,0,t.width,0,1),s=scale(o.y-t.y,0,t.height,0,1);n>=0&&n<=1&&s>=0&&s<=1&&(moveMouse={x:n,y:s})}},document.onmousedown=function(e){eventList.push({type:"mouse",action:"down",extra:e.which})},document.onmouseup=function(e){eventList.push({type:"mouse",action:"up",extra:e.which})},document.onkeydown=function(e){e.key in downKeys||(eventList.push({type:"key",action:"down",extra:e.key}),downKeys.push(e.key))},document.onkeyup=function(e){eventList.push({type:"key",action:"up",extra:e.key})},websocket.onopen=e=>{setInterval(function(e){++countWithoutMessages>50&&(document.body.innerHTML="<h1>Server has stopped responding</h1>"),websocket.readyState==WebSocket.OPEN&&(websocket.send(JSON.stringify({mouse:moveMouse,events:eventList})),eventList=[],downKeys=[])},100)},websocket.onmessage=e=>{e.data.startsWith("img64=")&&(countWithoutMessages=0,document.body.innerHTML=`<img src="data:image/png;base64,${e.data.split("=")[1]}" />`,document.querySelector("body > img").style.maxWidth="100%",document.querySelector("body > img").style.maxHeight="100%")},websocket.addEventListener("error",e=>{console.log("WebSocket error: ",e)});\')'
newWin.document.body.appendChild(newScript)